<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Achievement Calculator</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600&display=swap');
        body { 
            font-family: 'Sarabun', sans-serif; 
            lang: 'th-TH';
        }
        
        /* Thai date picker styling */
        input[type="date"]::-webkit-calendar-picker-indicator {
            background: transparent;
            bottom: 0;
            color: transparent;
            cursor: pointer;
            height: auto;
            left: 0;
            position: absolute;
            right: 0;
            top: 0;
            width: auto;
        }
        
        input[type="date"] {
            position: relative;
        }

        /* Force Thai locale for date inputs */
        input[type="date"]::-webkit-datetime-edit {
            font-family: 'Sarabun', sans-serif;
        }

        /* Calendar positioning fix */
        .calendar-container {
            position: relative;
        }
        
        .calendar-dropdown {
            position: fixed;
            z-index: 1000;
            background: white;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            padding: 1rem;
            width: 20rem;
            max-width: 90vw;
            max-height: 90vh;
            overflow-y: auto;
        }

        @media (max-width: 640px) {
            .calendar-dropdown {
                position: fixed;
                top: 50% !important;
                left: 50% !important;
                transform: translate(-50%, -50%) !important;
                width: 90vw;
                max-width: 350px;
                margin: 0 !important;
            }
        }
        
        /* Custom styles for extended progress bar */
        .progress-container {
            overflow: visible;
        }
    </style>
    <script>
        // Set Thai locale globally
        if (typeof Intl !== 'undefined') {
            Intl.DateTimeFormat.prototype.constructor.call = function() {
                return new Intl.DateTimeFormat('th-TH', arguments[1]);
            };
        }
        
        // Override date input behavior
        document.addEventListener('DOMContentLoaded', function() {
            // Set page language to Thai
            document.documentElement.lang = 'th-TH';
            
            // Try to set browser locale to Thai
            try {
                if (navigator.language !== 'th-TH') {
                    Object.defineProperty(navigator, 'language', {
                        value: 'th-TH',
                        writable: false
                    });
                }
            } catch(e) {}
        });
    </script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;
        
        // Simple SVG Icons
        const Calendar = ({className}) => React.createElement('svg', {
            className,
            fill: 'none',
            stroke: 'currentColor',
            viewBox: '0 0 24 24'
        }, React.createElement('rect', {x: '3', y: '4', width: '18', height: '18', rx: '2', ry: '2'}),
        React.createElement('line', {x1: '16', y1: '2', x2: '16', y2: '6'}),
        React.createElement('line', {x1: '8', y1: '2', x2: '8', y2: '6'}),
        React.createElement('line', {x1: '3', y1: '10', x2: '21', y2: '10'}));

        const Target = ({className}) => React.createElement('svg', {
            className,
            fill: 'none',
            stroke: 'currentColor',
            viewBox: '0 0 24 24'
        }, React.createElement('circle', {cx: '12', cy: '12', r: '10'}),
        React.createElement('circle', {cx: '12', cy: '12', r: '6'}),
        React.createElement('circle', {cx: '12', cy: '12', r: '2'}));

        const TrendingUp = ({className}) => React.createElement('svg', {
            className,
            fill: 'none',
            stroke: 'currentColor',
            viewBox: '0 0 24 24'
        }, React.createElement('polyline', {points: '23 6 13.5 15.5 8.5 10.5 1 18'}),
        React.createElement('polyline', {points: '17 6 23 6 23 12'}));

        const Download = ({className}) => React.createElement('svg', {
            className,
            fill: 'none',
            stroke: 'currentColor',
            viewBox: '0 0 24 24'
        }, React.createElement('path', {d: 'M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4'}),
        React.createElement('polyline', {points: '7 10 12 15 17 10'}),
        React.createElement('line', {x1: '12', y1: '15', x2: '12', y2: '3'}));

        const AchievementCalculator = () => {
            const [activeTab, setActiveTab] = useState('dateRange');
            const [startDate, setStartDate] = useState('');
            const [endDate, setEndDate] = useState('');
            const [days, setDays] = useState('');
            const [target, setTarget] = useState('');
            const [current, setCurrent] = useState('');
            const [showStartPicker, setShowStartPicker] = useState(false);
            const [showEndPicker, setShowEndPicker] = useState(false);
            const contentRef = useRef(null);

            // Thai months and days
            const thaiMonths = [
                '‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°', '‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå', '‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏°', '‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô', '‡∏û‡∏§‡∏©‡∏†‡∏≤‡∏Ñ‡∏°', '‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô',
                '‡∏Å‡∏£‡∏Å‡∏é‡∏≤‡∏Ñ‡∏°', '‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏°', '‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô', '‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏°', '‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô', '‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏°'
            ];
            
            const thaiDaysShort = ['‡∏≠‡∏≤', '‡∏à', '‡∏≠', '‡∏û', '‡∏û‡∏§', '‡∏®', '‡∏™'];

            // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ timezone
            const adjustForTimezone = (date) => {
                if (!date) return null;
                const d = new Date(date);
                // ‡πÄ‡∏û‡∏¥‡πà‡∏° offset ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏î‡πÄ‡∏ä‡∏¢ timezone
                const timezoneOffset = d.getTimezoneOffset() * 60000;
                return new Date(d.getTime() + timezoneOffset);
            };

            // Custom Thai Date Picker Component with improved positioning
            const ThaiDatePicker = ({ value, onChange, placeholder, isOpen, setIsOpen }) => {
                const today = new Date();
                const [currentMonth, setCurrentMonth] = useState(today.getMonth());
                const [currentYear, setCurrentYear] = useState(today.getFullYear());
                const [calendarStyle, setCalendarStyle] = useState({});
                const containerRef = useRef(null);
                const calendarRef = useRef(null);
                
                const selectedDate = value ? adjustForTimezone(value) : null;
                
                // Calculate optimal calendar position with improved logic
                useEffect(() => {
                    if (isOpen && containerRef.current) {
                        const container = containerRef.current;
                        const containerRect = container.getBoundingClientRect();
                        const viewportHeight = window.innerHeight;
                        const viewportWidth = window.innerWidth;
                        
                        // Calendar dimensions
                        const calendarHeight = 350;
                        const calendarWidth = 320;
                        
                        // Check available space
                        const spaceBelow = viewportHeight - containerRect.bottom;
                        const spaceAbove = containerRect.top;
                        const spaceRight = viewportWidth - containerRect.left;
                        const spaceLeft = containerRect.right;
                        
                        let top, left;
                        
                        // For mobile screens, center the calendar
                        if (viewportWidth <= 640) {
                            setCalendarStyle({
                                position: 'fixed',
                                top: '50%',
                                left: '50%',
                                transform: 'translate(-50%, -50%)',
                                width: '90vw',
                                maxWidth: '350px'
                            });
                            return;
                        }
                        
                        // Determine vertical position
                        if (spaceBelow >= calendarHeight) {
                            // Show below
                            top = containerRect.bottom + 8;
                        } else if (spaceAbove >= calendarHeight) {
                            // Show above
                            top = containerRect.top - calendarHeight - 8;
                        } else {
                            // Center vertically in viewport
                            top = Math.max(8, (viewportHeight - calendarHeight) / 2);
                        }
                        
                        // Determine horizontal position
                        if (spaceRight >= calendarWidth) {
                            // Align to left edge of container
                            left = containerRect.left;
                        } else if (spaceLeft >= calendarWidth) {
                            // Align to right edge of container
                            left = containerRect.right - calendarWidth;
                        } else {
                            // Center horizontally in viewport
                            left = Math.max(8, (viewportWidth - calendarWidth) / 2);
                        }
                        
                        // Ensure calendar doesn't go outside viewport
                        left = Math.max(8, Math.min(left, viewportWidth - calendarWidth - 8));
                        top = Math.max(8, Math.min(top, viewportHeight - calendarHeight - 8));
                        
                        setCalendarStyle({
                            position: 'fixed',
                            top: `${top}px`,
                            left: `${left}px`,
                            width: `${calendarWidth}px`
                        });
                    }
                }, [isOpen]);

                // Close calendar when clicking outside
                useEffect(() => {
                    const handleClickOutside = (event) => {
                        if (containerRef.current && !containerRef.current.contains(event.target)) {
                            setIsOpen(false);
                        }
                    };

                    if (isOpen) {
                        document.addEventListener('mousedown', handleClickOutside);
                        return () => document.removeEventListener('mousedown', handleClickOutside);
                    }
                }, [isOpen, setIsOpen]);
                
                const getDaysInMonth = (month, year) => {
                    return new Date(year, month + 1, 0).getDate();
                };
                
                const getFirstDayOfMonth = (month, year) => {
                    return new Date(year, month, 1).getDay();
                };
                
                const formatDisplayDate = (dateStr) => {
                    if (!dateStr) return placeholder;
                    const date = adjustForTimezone(dateStr);
                    const day = date.getDate();
                    const month = thaiMonths[date.getMonth()];
                    const year = date.getFullYear() + 543;
                    return `${day} ${month} ${year}`;
                };
                
                const handleDateSelect = (day) => {
                    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏´‡∏°‡πà‡πÇ‡∏î‡∏¢‡∏Ñ‡∏≥‡∏ô‡∏∂‡∏á‡∏ñ‡∏∂‡∏á timezone
                    const newDate = new Date(currentYear, currentMonth, day, 12, 0, 0); // ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏á‡∏ß‡∏±‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤ timezone
                    const year = newDate.getFullYear();
                    const month = String(newDate.getMonth() + 1).padStart(2, '0');
                    const dayFormatted = String(newDate.getDate()).padStart(2, '0');
                    const dateString = `${year}-${month}-${dayFormatted}`;
                    onChange(dateString);
                    setIsOpen(false);
                };
                
                const renderCalendar = () => {
                    const daysInMonth = getDaysInMonth(currentMonth, currentYear);
                    const firstDay = getFirstDayOfMonth(currentMonth, currentYear);
                    const days = [];
                    
                    // Empty cells for days before month start
                    for (let i = 0; i < firstDay; i++) {
                        days.push(React.createElement('div', { key: `empty-${i}`, className: "p-2" }));
                    }
                    
                    // Days of the month
                    for (let day = 1; day <= daysInMonth; day++) {
                        const isSelected = selectedDate && 
                            selectedDate.getDate() === day && 
                            selectedDate.getMonth() === currentMonth && 
                            selectedDate.getFullYear() === currentYear;
                            
                        const isToday = new Date().getDate() === day && 
                            new Date().getMonth() === currentMonth && 
                            new Date().getFullYear() === currentYear;
                            
                        days.push(
                            React.createElement('button', {
                                key: day,
                                onClick: () => handleDateSelect(day),
                                className: `p-2 text-sm rounded transition-colors ${
                                    isSelected ? 'bg-blue-600 text-white' : 
                                    isToday ? 'bg-blue-100 text-blue-800 font-medium' : 
                                    'text-gray-700 hover:bg-gray-100'
                                }`
                            }, day)
                        );
                    }
                    
                    return days;
                };
                
                // Navigation functions
                const goToPreviousMonth = () => {
                    if (currentMonth === 0) {
                        setCurrentMonth(11);
                        setCurrentYear(currentYear - 1);
                    } else {
                        setCurrentMonth(currentMonth - 1);
                    }
                };
                
                const goToNextMonth = () => {
                    if (currentMonth === 11) {
                        setCurrentMonth(0);
                        setCurrentYear(currentYear + 1);
                    } else {
                        setCurrentMonth(currentMonth + 1);
                    }
                };
                
                return React.createElement('div', { 
                    ref: containerRef,
                    className: "calendar-container"
                },
                    React.createElement('button', {
                        onClick: () => setIsOpen(!isOpen),
                        className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent text-left bg-white"
                    }, formatDisplayDate(value)),
                    
                    isOpen && React.createElement('div', {
                        ref: calendarRef,
                        className: "calendar-dropdown",
                        style: calendarStyle
                    },
                        // Header with month/year navigation
                        React.createElement('div', { className: "flex justify-between items-center mb-4" },
                            React.createElement('button', {
                                onClick: goToPreviousMonth,
                                className: "p-1 hover:bg-gray-100 rounded"
                            }, '‚Äπ'),
                            
                            React.createElement('div', { className: "text-center font-medium" },
                                `${thaiMonths[currentMonth]} ${currentYear + 543}`
                            ),
                            
                            React.createElement('button', {
                                onClick: goToNextMonth,
                                className: "p-1 hover:bg-gray-100 rounded"
                            }, '‚Ä∫')
                        ),
                        
                        // Days header
                        React.createElement('div', { className: "grid grid-cols-7 gap-1 mb-2" },
                            thaiDaysShort.map(day => 
                                React.createElement('div', {
                                    key: day,
                                    className: "p-2 text-xs font-medium text-gray-500 text-center"
                                }, day)
                            )
                        ),
                        
                        // Calendar grid
                        React.createElement('div', { className: "grid grid-cols-7 gap-1" },
                            renderCalendar()
                        ),
                        
                        // Today button
                        React.createElement('div', { className: "mt-4 pt-4 border-t border-gray-200" },
                            React.createElement('button', {
                                onClick: () => {
                                    const today = new Date();
                                    // ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏á‡∏ß‡∏±‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤ timezone
                                    const adjustedToday = new Date(today.getFullYear(), today.getMonth(), today.getDate(), 12, 0, 0);
                                    const year = adjustedToday.getFullYear();
                                    const month = String(adjustedToday.getMonth() + 1).padStart(2, '0');
                                    const day = String(adjustedToday.getDate()).padStart(2, '0');
                                    const dateString = `${year}-${month}-${day}`;
                                    onChange(dateString);
                                    setIsOpen(false);
                                },
                                className: "w-full py-2 text-sm text-blue-600 hover:bg-blue-50 rounded-md"
                            }, "‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ")
                        )
                    )
                );
            };

            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô
            const calculateDays = () => {
                if (activeTab === 'dateRange' && startDate && endDate) {
                    const start = adjustForTimezone(startDate);
                    const end = adjustForTimezone(endDate);
                    
                    // Ensure start date is before end date
                    if (start > end) {
                        // Swap dates if start is after end
                        const temp = startDate;
                        setStartDate(endDate);
                        setEndDate(temp);
                        return 0;
                    }
                    
                    const diffTime = Math.abs(end - start);
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)) + 1;
                    return diffDays;
                }
                return parseInt(days) || 0;
            };

            // ‡πÅ‡∏õ‡∏•‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢
            const formatThaiDate = (dateString) => {
                if (!dateString) return '';
                const date = adjustForTimezone(dateString);
                const day = date.getDate();
                const month = thaiMonths[date.getMonth()];
                const year = date.getFullYear() + 543; // ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô ‡∏û.‡∏®.
                return `${day} ${month} ${year}`;
            };

            // ‡πÅ‡∏™‡∏î‡∏á‡∏ä‡πà‡∏ß‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢
            const getDateRangeDisplay = () => {
                if (activeTab === 'dateRange' && startDate && endDate) {
                    return `${formatThaiDate(startDate)} - ${formatThaiDate(endDate)}`;
                }
                return '';
            };

            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
            const totalDays = calculateDays();
            const targetAmount = parseFloat(target) || 0;
            const currentAmount = parseFloat(current) || 0;
            const remainingAmount = Math.max(0, targetAmount - currentAmount);
            const dailyTarget = totalDays > 0 ? (remainingAmount / totalDays) : 0;
            const progressPercentage = targetAmount > 0 ? (currentAmount / targetAmount * 100) : 0;
            const isOnTrack = progressPercentage >= 50;

            // ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏¢‡∏≠‡∏î - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏¢‡∏≠‡∏î‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
            const getRecommendations = () => {
                if (!targetAmount || !totalDays || remainingAmount <= 0) return [];
                
                const recommendations = [];
                
                if (dailyTarget > 0) {
                    recommendations.push(`‡∏ó‡∏≥‡∏¢‡∏≠‡∏î‡∏ß‡∏±‡∏ô‡∏•‡∏∞ ${dailyTarget.toLocaleString('th-TH', {maximumFractionDigits: 0})} ‡∏ö‡∏≤‡∏ó`);
                    
                    const weeklyTarget = dailyTarget * 7;
                    recommendations.push(`‡∏ó‡∏≥‡∏¢‡∏≠‡∏î‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏•‡∏∞ ${weeklyTarget.toLocaleString('th-TH', {maximumFractionDigits: 0})} ‡∏ö‡∏≤‡∏ó`);
                    
                    // ‡πÉ‡∏ä‡πâ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÅ‡∏ó‡∏ô 30 ‡∏ß‡∏±‡∏ô
                    const today = new Date();
                    const daysInCurrentMonth = new Date(today.getFullYear(), today.getMonth() + 1, 0).getDate();
                    const monthlyTarget = dailyTarget * daysInCurrentMonth;
                    
                    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏™‡∏î‡∏á
                    if (monthlyTarget <= remainingAmount) {
                        recommendations.push(`‡∏ó‡∏≥‡∏¢‡∏≠‡∏î‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏•‡∏∞ ${monthlyTarget.toLocaleString('th-TH', {maximumFractionDigits: 0})} ‡∏ö‡∏≤‡∏ó`);
                    } else {
                        // ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏¢‡∏≠‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏´‡∏≤‡∏Å‡∏¢‡∏≠‡∏î‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
                        recommendations.push(`‡∏ó‡∏≥‡∏¢‡∏≠‡∏î‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏•‡∏∞ ${remainingAmount.toLocaleString('th-TH', {maximumFractionDigits: 0})} ‡∏ö‡∏≤‡∏ó (‡∏¢‡∏≠‡∏î‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠)`);
                    }
                }
                
                return recommendations;
            };

            // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏õ‡πá‡∏ô PNG
            const saveAsPNG = async () => {
                if (!contentRef.current) return;

                try {
                    const canvas = await html2canvas(contentRef.current, {
                        backgroundColor: '#ffffff',
                        scale: 2,
                        useCORS: true
                    });
                    
                    const link = document.createElement('a');
                    link.download = 'achievement-report.png';
                    link.href = canvas.toDataURL();
                    link.click();
                } catch (error) {
                    alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏†‡∏≤‡∏û‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏ä‡πâ Ctrl+P ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏û‡∏¥‡∏°‡∏û‡πå‡πÅ‡∏ó‡∏ô');
                }
            };

            return React.createElement('div', { className: "min-h-screen bg-gray-50 p-4" },
                React.createElement('div', { className: "max-w-4xl mx-auto" },
                    React.createElement('div', { ref: contentRef, className: "bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden" },
                        // Header
                        React.createElement('div', { className: "bg-white border-b border-gray-200 p-6" },
                            React.createElement('h1', { className: "text-2xl font-semibold text-gray-800 flex items-center gap-2" },
                                React.createElement(Target, { className: "w-6 h-6 text-blue-600" }),
                                "Achievement Calculator"
                            ),
                            React.createElement('p', { className: "text-gray-600 mt-1" }, "‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÅ‡∏•‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏¢‡∏≠‡∏î Achievement ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì")
                        ),

                        // Tabs
                        React.createElement('div', { className: "bg-gray-50 border-b border-gray-200" },
                            React.createElement('div', { className: "flex" },
                                React.createElement('button', {
                                    className: `px-6 py-3 text-sm font-medium border-b-2 transition-colors ${
                                        activeTab === 'dateRange'
                                            ? 'border-blue-600 text-blue-600 bg-white'
                                            : 'border-transparent text-gray-500 hover:text-gray-700'
                                    }`,
                                    onClick: () => setActiveTab('dateRange')
                                },
                                    React.createElement(Calendar, { className: "w-4 h-4 inline mr-2" }),
                                    "‡∏ä‡πà‡∏ß‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà"
                                ),
                                React.createElement('button', {
                                    className: `px-6 py-3 text-sm font-medium border-b-2 transition-colors ${
                                        activeTab === 'days'
                                            ? 'border-blue-600 text-blue-600 bg-white'
                                            : 'border-transparent text-gray-500 hover:text-gray-700'
                                    }`,
                                    onClick: () => setActiveTab('days')
                                }, "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô")
                            )
                        ),

                        // Content
                        React.createElement('div', { className: "p-6" },
                            // Input Section
                            React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-2 gap-6 mb-8" },
                                // Date Range Tab
                                activeTab === 'dateRange' && React.createElement(React.Fragment, null,
                                    React.createElement('div', null,
                                        React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô"),
                                        React.createElement(ThaiDatePicker, {
                                            value: startDate,
                                            onChange: setStartDate,
                                            placeholder: "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô",
                                            isOpen: showStartPicker,
                                            setIsOpen: setShowStartPicker
                                        })
                                    ),
                                    React.createElement('div', null,
                                        React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î"),
                                        React.createElement(ThaiDatePicker, {
                                            value: endDate,
                                            onChange: setEndDate,
                                            placeholder: "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î",
                                            isOpen: showEndPicker,
                                            setIsOpen: setShowEndPicker
                                        })
                                    )
                                ),

                                // Days Tab
                                activeTab === 'days' && React.createElement('div', { className: "md:col-span-2" },
                                    React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô"),
                                    React.createElement('input', {
                                        type: "number",
                                        value: days,
                                        onChange: (e) => setDays(e.target.value),
                                        placeholder: "‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô",
                                        className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    })
                                ),

                                // Target and Current Amount
                                React.createElement('div', null,
                                    React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (‡∏ö‡∏≤‡∏ó)"),
                                    React.createElement('input', {
                                        type: "number",
                                        value: target,
                                        onChange: (e) => setTarget(e.target.value),
                                        placeholder: "‡∏Å‡∏£‡∏≠‡∏Å‡∏¢‡∏≠‡∏î‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢",
                                        className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    })
                                ),
                                React.createElement('div', null,
                                    React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "‡∏¢‡∏≠‡∏î‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (‡∏ö‡∏≤‡∏ó)"),
                                    React.createElement('input', {
                                        type: "number",
                                        value: current,
                                        onChange: (e) => setCurrent(e.target.value),
                                        placeholder: "‡∏Å‡∏£‡∏≠‡∏Å‡∏¢‡∏≠‡∏î‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô",
                                        className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    })
                                )
                            ),

                            // Results Section
                            totalDays > 0 && targetAmount > 0 && React.createElement('div', { className: "space-y-6" },
                                // Summary Cards
                                React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-4 gap-4" },
                                    React.createElement('div', { className: "bg-blue-50 rounded-lg p-4 text-center" },
                                        React.createElement('div', { className: "text-2xl font-bold text-blue-600" }, totalDays),
                                        React.createElement('div', { className: "text-sm text-gray-600" }, "‡∏ß‡∏±‡∏ô"),
                                        getDateRangeDisplay() && React.createElement('div', { className: "text-xs text-gray-500 mt-1" }, getDateRangeDisplay())
                                    ),
                                    React.createElement('div', { className: "bg-green-50 rounded-lg p-4 text-center" },
                                        React.createElement('div', { className: "text-2xl font-bold text-green-600" },
                                            targetAmount.toLocaleString('th-TH')
                                        ),
                                        React.createElement('div', { className: "text-sm text-gray-600" }, "‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢")
                                    ),
                                    React.createElement('div', { className: "bg-yellow-50 rounded-lg p-4 text-center" },
                                        React.createElement('div', { className: "text-2xl font-bold text-yellow-600" },
                                            currentAmount.toLocaleString('th-TH')
                                        ),
                                        React.createElement('div', { className: "text-sm text-gray-600" }, "‡∏¢‡∏≠‡∏î‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô")
                                    ),
                                    React.createElement('div', { className: "bg-red-50 rounded-lg p-4 text-center" },
                                        React.createElement('div', { className: "text-2xl font-bold text-red-600" },
                                            remainingAmount.toLocaleString('th-TH')
                                        ),
                                        React.createElement('div', { className: "text-sm text-gray-600" }, "‡∏¢‡∏≠‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠")
                                    )
                                ),

                                // Progress Bar - UPDATED: ‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏¥‡∏ô 100% ‡πÅ‡∏ï‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ
                                React.createElement('div', { className: "bg-gray-50 rounded-lg p-6" },
                                    React.createElement('div', { className: "flex justify-between items-center mb-2" },
                                        React.createElement('span', { className: "text-sm font-medium text-gray-700" }, "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤"),
                                        React.createElement('span', { className: "text-sm font-medium text-gray-700" },
                                            `${progressPercentage.toFixed(1)}%`
                                        )
                                    ),
                                    React.createElement('div', { className: "w-full bg-gray-200 rounded-full h-3" },
                                        React.createElement('div', {
                                            className: `h-3 rounded-full transition-all duration-300 ${
                                                progressPercentage >= 100 ? 'bg-purple-600' : // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏¥‡∏ô 100%
                                                progressPercentage >= 75 ? 'bg-blue-600' :
                                                progressPercentage >= 50 ? 'bg-yellow-600' : 'bg-red-600'
                                            }`,
                                            style: { 
                                                width: `${Math.min(100, progressPercentage)}%` // ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 100%
                                            }
                                        })
                                    ),
                                    progressPercentage > 100 && React.createElement('div', { 
                                        className: "mt-2 text-sm text-purple-600 font-medium text-center"
                                    }, `üéâ ‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡πÄ‡∏Å‡∏¥‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ ${(progressPercentage - 100).toFixed(1)}%`)
                                ),

                                // Daily Target (‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢)
                                dailyTarget > 0 && remainingAmount > 0 && React.createElement('div', { className: "bg-blue-50 rounded-lg p-6 text-center" },
                                    React.createElement('h3', { className: "text-lg font-medium text-gray-800 mb-2" }, "‡∏¢‡∏≠‡∏î‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô"),
                                    React.createElement('div', { className: "text-3xl font-bold text-blue-600" },
                                        dailyTarget.toLocaleString('th-TH', {maximumFractionDigits: 0}), " ‡∏ö‡∏≤‡∏ó"
                                    ),
                                    React.createElement('div', { className: "text-sm text-gray-600 mt-2" },
                                        `‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ñ‡∏∂‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ ${targetAmount.toLocaleString('th-TH')} ‡∏ö‡∏≤‡∏ó ‡πÉ‡∏ô ${totalDays} ‡∏ß‡∏±‡∏ô`
                                    )
                                ),

                                // Recommendations
                                React.createElement('div', { className: "bg-gray-50 rounded-lg p-6" },
                                    React.createElement('h3', { className: "text-lg font-medium text-gray-800 mb-4 flex items-center gap-2" },
                                        React.createElement(TrendingUp, { className: "w-5 h-5 text-blue-600" }),
                                        "‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏¢‡∏≠‡∏î"
                                    ),
                                    
                                    remainingAmount > 0 ?
                                        React.createElement('div', { className: "space-y-3" },
                                            getRecommendations().map((rec, index) =>
                                                React.createElement('div', { key: index, className: "flex items-center gap-3" },
                                                    React.createElement('div', { className: "w-2 h-2 bg-blue-600 rounded-full" }),
                                                    React.createElement('span', { className: "text-gray-700" }, rec)
                                                )
                                            ),
                                            
                                            progressPercentage < 100 && React.createElement('div', {
                                                className: `mt-4 p-3 rounded-lg ${
                                                    isOnTrack ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'
                                                }`
                                            },
                                                React.createElement('div', { className: "font-medium" },
                                                    isOnTrack 
                                                        ? '‚úÖ ‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏µ!' 
                                                        : '‚ö†Ô∏è ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏£‡πà‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏¢‡∏≠‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ñ‡∏∂‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢'
                                                )
                                            )
                                        ) :
                                        React.createElement('div', { className: "text-green-600 text-center py-4 font-medium" },
                                            "üéâ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß"
                                        )
                                )
                            )
                        ),

                        // Save Button
                        React.createElement('div', { className: "bg-gray-50 border-t border-gray-200 p-4" },
                            React.createElement('button', {
                                onClick: saveAsPNG,
                                className: "w-full md:w-auto px-6 py-2 bg-blue-600 text-white font-medium rounded-md hover:bg-blue-700 transition-colors flex items-center justify-center gap-2"
                            },
                                React.createElement(Download, { className: "w-4 h-4" }),
                                "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏õ‡πá‡∏ô PNG"
                            )
                        )
                    )
                )
            );
        };

        ReactDOM.render(React.createElement(AchievementCalculator), document.getElementById('root'));
    </script>
</body>
</html>