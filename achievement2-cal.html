<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Achievement Calculator</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600&display=swap');
        body { 
            font-family: 'Sarabun', sans-serif; 
            lang: 'th-TH';
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        /* Thai date picker styling */
        input[type="date"]::-webkit-calendar-picker-indicator {
            background: transparent;
            bottom: 0;
            color: transparent;
            cursor: pointer;
            height: auto;
            left: 0;
            position: absolute;
            right: 0;
            top: 0;
            width: auto;
        }
        
        input[type="date"] {
            position: relative;
        }

        /* Force Thai locale for date inputs */
        input[type="date"]::-webkit-datetime-edit {
            font-family: 'Sarabun', sans-serif;
        }

        /* Calendar positioning fix */
        .calendar-container {
            position: relative;
        }
        
        .calendar-dropdown {
            position: fixed;
            z-index: 1000;
            background: white;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            padding: 1rem;
            width: 20rem;
            max-width: 90vw;
            max-height: 90vh;
            overflow-y: auto;
        }

        @media (max-width: 640px) {
            .calendar-dropdown {
                position: fixed;
                top: 50% !important;
                left: 50% !important;
                transform: translate(-50%, -50%) !important;
                width: 90vw;
                max-width: 350px;
                margin: 0 !important;
            }
        }
        
        /* Custom styles for extended progress bar */
        .progress-container {
            overflow: visible;
        }
        
        /* Print/save styles */
        @media print {
            .no-print {
                display: none !important;
            }
            
            body {
                background: white !important;
                padding: 0 !important;
            }
            
            .print-container {
                box-shadow: none !important;
                border: none !important;
                border-radius: 0 !important;
            }
        }
        
        .save-mode .no-save {
            display: none !important;
        }
        
        .achievement-card {
            transition: all 0.3s ease;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        .achievement-card:hover {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .gradient-header {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
        }
        
        .stat-card {
            transition: transform 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .milestone-bar {
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            position: relative;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .milestone-progress {
            height: 100%;
            border-radius: 4px;
            background: linear-gradient(90deg, #3b82f6 0%, #8b5cf6 100%);
            transition: width 0.5s ease;
        }
        
        .milestone-marker {
            position: absolute;
            top: -5px;
            width: 2px;
            height: 18px;
            background-color: #6b7280;
            z-index: 2;
        }
        
        .milestone-label {
            position: absolute;
            top: 20px;
            transform: translateX(-50%);
            font-size: 0.75rem;
            color: #6b7280;
            white-space: nowrap;
            z-index: 2;
        }
        
        .milestone-80 {
            background-color: #3b82f6;
        }
        
        .milestone-85 {
            background-color: #8b5cf6;
        }
        
        .completion-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 6px;
        }
        
        .completed {
            background-color: #10b981;
            color: white;
        }
        
        .not-completed {
            background-color: #ef4444;
            color: white;
        }
        
        .time-progress-bar {
            height: 6px;
            background: #e5e7eb;
            border-radius: 3px;
            overflow: hidden;
        }
        
        .time-progress-fill {
            height: 100%;
            border-radius: 3px;
            transition: width 0.5s ease;
        }
        
        .efficiency-indicator {
            display: inline-flex;
            align-items: center;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 6px;
        }
        
        .efficient {
            background-color: #10b981;
            color: white;
        }
        
        .moderate {
            background-color: #f59e0b;
            color: white;
        }
        
        .inefficient {
            background-color: #ef4444;
            color: white;
        }
    </style>
    <script>
        // Set Thai locale globally
        if (typeof Intl !== 'undefined') {
            Intl.DateTimeFormat.prototype.constructor.call = function() {
                return new Intl.DateTimeFormat('th-TH', arguments[1]);
            };
        }
        
        // Override date input behavior
        document.addEventListener('DOMContentLoaded', function() {
            // Set page language to Thai
            document.documentElement.lang = 'th-TH';
            
            // Try to set browser locale to Thai
            try {
                if (navigator.language !== 'th-TH') {
                    Object.defineProperty(navigator, 'language', {
                        value: 'th-TH',
                        writable: false
                    });
                }
            } catch(e) {}
        });
    </script>
</head>
<body class="flex items-center justify-center">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;
        
        // Simple SVG Icons
        const Calendar = ({className}) => React.createElement('svg', {
            className,
            fill: 'none',
            stroke: 'currentColor',
            viewBox: '0 0 24 24'
        }, React.createElement('rect', {x: '3', y: '4', width: '18', height: '18', rx: '2', ry: '2'}),
        React.createElement('line', {x1: '16', y1: '2', x2: '16', y2: '6'}),
        React.createElement('line', {x1: '8', y1: '2', x2: '8', y2: '6'}),
        React.createElement('line', {x1: '3', y1: '10', x2: '21', y2: '10'}));

        const Target = ({className}) => React.createElement('svg', {
            className,
            fill: 'none',
            stroke: 'currentColor',
            viewBox: '0 0 24 24'
        }, React.createElement('circle', {cx: '12', cy: '12', r: '10'}),
        React.createElement('circle', {cx: '12', cy: '12', r: '6'}),
        React.createElement('circle', {cx: '12', cy: '12', r: '2'}));

        const TrendingUp = ({className}) => React.createElement('svg', {
            className,
            fill: 'none',
            stroke: 'currentColor',
            viewBox: '0 0 24 24'
        }, React.createElement('polyline', {points: '23 极 13.5 15.5 8.5 10.5 1 18'}),
        React.createElement('polyline', {points: '17 6 23 6 23 12'}));

        const Clock = ({className}) => React.createElement('svg', {
            className,
            fill: 'none',
            stroke: 'currentColor',
            viewBox: '0 0 24 24'
        }, React.createElement('circle', {cx: '12', cy: '12', r: '10'}),
        React.createElement('polyline', {points: '12 6 12 12 16 14'}));

        const Download = ({className}) => React.createElement('svg', {
            className,
            fill: 'none',
            stroke: 'currentColor',
            viewBox: '0 0 24 24'
        }, React.createElement('path', {d: 'M21 15v4a2 2 0 0 1-2 2极5a2 2 0 0 1-2-2v-4'}),
        React.createElement('polyline', {points: '7 10 12 15 17 10'}),
        React.createElement('line', {x1: '12', y1: '15', x2: '12', y2: '3'}));

        const AchievementCalculator = () => {
            const [activeTab, setActiveTab] = useState('dateRange');
            const [startDate, setStartDate] = useState('');
            const [endDate, setEndDate] = useState('');
            const [days, setDays] = useState('');
            const [target, setTarget] = useState('');
            const [current, setCurrent] = useState('');
            const [showStartPicker, setShowStartPicker] = useState(false);
            const [showEndPicker, setShowEndPicker] = useState(false);
            const contentRef = useRef(null);

            // Thai months and days
            const thaiMonths = [
                'มกราคม', 'กุมภาพันธ์', 'มีนาคม', 'เมษายน', 'พฤษภาคม', 'มิถุนายน',
                'กรกฎาคม', 'สิงหาคม', 'กันยายน', 'ตุลาคม', 'พฤศจิกายน', 'ธันวาคม'
            ];
            
            const thaiDaysShort = ['อา', 'จ', 'อ', 'พ', 'พฤ', 'ศ', 'ส'];

            // Custom Thai Date Picker Component with improved positioning
            const ThaiDatePicker = ({ value, onChange, placeholder, isOpen, setIsOpen }) => {
                const today = new Date();
                const [currentMonth, setCurrentMonth] = useState(today.getMonth());
                const [currentYear, setCurrentYear] = useState(today.getFullYear());
                const [calendarStyle, setCalendarStyle] = useState({});
                const containerRef = useRef(null);
                const calendarRef = useRef(null);
                
                const selectedDate = value ? new Date(value) : null;
                
                // Calculate optimal calendar position with improved logic
                useEffect(() => {
                    if (isOpen && containerRef.current) {
                        const container = containerRef.current;
                        const containerRect = container.getBoundingClientRect();
                        const viewportHeight = window.innerHeight;
                        const viewportWidth = window.innerWidth;
                        
                        // Calendar dimensions
                        const calendarHeight = 350;
                        const calendarWidth = 320;
                        
                        // Check available space
                        const spaceBelow = viewportHeight - containerRect.bottom;
                        const spaceAbove = containerRect.top;
                        const spaceRight = viewportWidth - containerRect.left;
                        const spaceLeft = containerRect.right;
                        
                        let top, left;
                        
                        // For mobile screens, center the calendar
                        if (viewportWidth <= 640) {
                            setCalendarStyle({
                                position: 'fixed',
                                top: '50%',
                                left: '50%',
                                transform: 'translate(-50%, -50%)',
                                width: '90vw',
                                maxWidth: '350px'
                            });
                            return;
                        }
                        
                        // Determine vertical position
                        if (spaceBelow >= calendarHeight) {
                            // Show below
                            top = containerRect.bottom + 8;
                        } else if (spaceAbove >= calendarHeight) {
                            // Show above
                            top = containerRect.top - calendarHeight - 8;
                        } else {
                            // Center vertically in viewport
                            top = Math.max(8, (viewportHeight - calendarHeight) / 2);
                        }
                        
                        // Determine horizontal position
                        if (spaceRight >= calendarWidth) {
                            // Align to left edge of container
                            left = containerRect.left;
                        } else if (spaceLeft >= calendarWidth) {
                            // Align to right edge of container
                            left = containerRect.right - calendarWidth;
                        } else {
                            // Center horizontally in viewport
                            left = Math.max(8, (viewportWidth - calendarWidth) / 2);
                        }
                        
                        // Ensure calendar doesn't go outside viewport
                        left = Math.max(8, Math.min(left, viewportWidth - calendarWidth - 8));
                        top = Math.max(8, Math.min(top, viewportHeight - calendarHeight - 8));
                        
                        setCalendarStyle({
                            position: 'fixed',
                            top: `${top}px`,
                            left: `${left}px`,
                            width: `${calendarWidth}px`
                        });
                    }
                }, [isOpen]);

                // Close calendar when clicking outside
                useEffect(() => {
                    const handleClickOutside = (event) => {
                        if (containerRef.current && !containerRef.current.contains(event.target)) {
                            setIsOpen(false);
                        }
                    };

                    if (isOpen) {
                        document.addEventListener('mousedown', handleClickOutside);
                        return () => document.removeEventListener('mousedown', handleClickOutside);
                    }
                }, [isOpen, setIsOpen]);
                
                const getDaysInMonth = (month, year) => {
                    return new Date(year, month + 1, 0).getDate();
                };
                
                const getFirstDayOfMonth = (month, year) => {
                    return new Date(year, month, 1).getDay();
                };
                
                const formatDisplayDate = (dateStr) => {
                    if (!dateStr) return placeholder;
                    const date = new Date(dateStr);
                    const day = date.getDate();
                    const month = thaiMonths[date.getMonth()];
                    const year = date.getFullYear() + 543;
                    return `${day} ${month} ${year}`;
                };
                
                const handleDateSelect = (day) => {
                    const newDate = new Date(currentYear, currentMonth, day);
                    const dateString = newDate.toISOString().split('T')[0];
                    onChange(dateString);
                    setIsOpen(false);
                };
                
                const renderCalendar = () => {
                    const daysInMonth = getDaysInMonth(currentMonth, currentYear);
                    const firstDay = getFirstDayOfMonth(currentMonth, currentYear);
                    const days = [];
                    
                    // Empty cells for days before month start
                    for (let i = 0; i < firstDay; i++) {
                        days.push(React.createElement('div', { key: `empty-${i}`, className: "p-2" }));
                    }
                    
                    // Days of the month
                    for (let day = 1; day <= daysInMonth; day++) {
                        const isSelected = selectedDate && 
                            selectedDate.getDate() === day && 
                            selectedDate.getMonth() === currentMonth && 
                            selectedDate.getFullYear() === currentYear;
                            
                        const isToday = new Date().getDate() === day && 
                            new Date().getMonth() === currentMonth && 
                            new Date().getFullYear() === currentYear;
                            
                        days.push(
                            React.createElement('button', {
                                key: day,
                                onClick: () => handleDateSelect(day),
                                className: `p-2 text-sm rounded transition-colors ${
                                    isSelected ? 'bg-blue-600 text-white' : 
                                    isToday ? 'bg-blue-100 text-blue-800 font-medium' : 
                                    'text-gray-700 hover:bg-gray-100'
                                }`
                            }, day)
                        );
                    }
                    
                    return days;
                };
                
                // Navigation functions
                const goToPreviousMonth = () => {
                    if (currentMonth === 0) {
                        setCurrentMonth(11);
                        setCurrentYear(currentYear - 1);
                    } else {
                        setCurrentMonth(currentMonth - 1);
                    }
                };
                
                const goToNextMonth = () => {
                    if (currentMonth === 11) {
                        setCurrentMonth(0);
                        setCurrentYear(currentYear + 1);
                    } else {
                        setCurrentMonth(currentMonth + 1);
                    }
                };
                
                return React.createElement('div', { 
                    ref: containerRef,
                    className: "calendar-container"
                },
                    React.createElement('button', {
                        onClick: () => setIsOpen(!isOpen),
                        className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent text-left bg-white"
                    }, formatDisplayDate(value)),
                    
                    isOpen && React.createElement('div', {
                        ref: calendarRef,
                        className: "calendar-dropdown",
                        style: calendarStyle
                    },
                        // Header with month/year navigation
                        React.createElement('div', { className: "flex justify-between items-center mb-4" },
                            React.createElement('button', {
                                onClick: goToPreviousMonth,
                                className: "p-1 hover:bg-gray-100 rounded"
                            }, '‹'),
                            
                            React.createElement('div', { className: "text-center font-medium" },
                                `${thaiMonths[currentMonth]} ${currentYear + 543}`
                            ),
                            
                            React.createElement('button', {
                                onClick: goToNextMonth,
                                className: "p-1 hover:bg-gray-100 rounded"
                            }, '›')
                        ),
                        
                        // Days header
                        React.createElement('div', { className: "grid grid-cols-7 gap-1 mb-2" },
                            thaiDaysShort.map(day => 
                                React.createElement('div', {
                                    key: day,
                                    className: "p-2 text-xs font-medium text-gray-500 text-center"
                                }, day)
                            )
                        ),
                        
                        // Calendar grid
                        React.createElement('div', { className: "grid grid-cols-7 gap-1" },
                            renderCalendar()
                        ),
                        
                        // Today button
                        React.createElement('div', { className: "mt-4 pt-4 border-t border-gray-200" },
                            React.createElement('button', {
                                onClick: () => {
                                    const today = new Date();
                                    const dateString = today.toISOString().split('T')[0];
                                    onChange(dateString);
                                    setIsOpen(false);
                                },
                                className: "w-full py-2 text-sm text-blue-600 hover:bg-blue-50 rounded-md"
                            }, "วันนี้")
                        )
                    )
                );
            };

            // คำนวณจำนวนวัน
            const calculateDays = () => {
                if (activeTab === 'dateRange' && startDate && endDate) {
                    const start = new Date(startDate);
                    const end = new Date(endDate);
                    
                    // Ensure start date is before end date
                    if (start > end) {
                        // Swap dates if start is after end
                        const temp = startDate;
                        setStartDate(endDate);
                        setEndDate(temp);
                        return 0;
                    }
                    
                    const diffTime = Math.abs(end - start);
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)) + 1;
                    return diffDays;
                }
                return parseInt(days) || 0;
            };

            // คำนวณจำนวนวันที่ผ่านไปแล้ว
            const calculateDaysPassed = () => {
                if (activeTab === 'dateRange' && startDate) {
                    const start = new Date(startDate);
                    const today = new Date();
                    today.setHours(0, 0, 0, 0);
                    
                    if (start > today) return 0;
                    
                    const diffTime = Math.abs(today - start);
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)) + 1;
                    return Math.min(diffDays, totalDays);
                }
                return 0;
            };

            // แปลงวันที่เป็นภาษาไทย
            const formatThaiDate = (dateString) => {
                if (!dateString) return '';
                const date = new Date(dateString);
                const thaiMonths = [
                    'มกราคม', 'กุมภาพันธ์', 'มีนาคม', 'เมษายน', 'พฤษภาคม', 'มิถุนายน',
                    'กรกฎาคม', 'สิงหาคม', 'กันยายน', 'ตุลาคม', 'พฤศจิกายน', 'ธันวาคม'
                ];
                const day = date.getDate();
                const month = thaiMonths[date.getMonth()];
                const year = date.getFullYear() + 543; // แปลงเป็น พ.ศ.
                return `${day} ${month} ${year}`;
            };

            // แสดงช่วงวันที่ภาษาไทย
            const getDateRangeDisplay = () => {
                if (activeTab === 'dateRange' && startDate && endDate) {
                    return `${formatThaiDate(startDate)} - ${formatThaiDate(endDate)}`;
                }
                return '';
            };

            // คำนวณสถิติ
            const totalDays = calculateDays();
            const daysPassed = calculateDaysPassed();
            const targetAmount = parseFloat(target) || 0;
            const currentAmount = parseFloat(current) || 0;
            const remainingAmount = Math.max(0, targetAmount - currentAmount);
            const dailyTarget = totalDays > 0 ? (remainingAmount / totalDays) : 0;
            const progressPercentage = targetAmount > 0 ? (currentAmount / targetAmount * 100) : 0;
            
            // คำนวณ Time Use Percentage
            const timeUsePercentage = totalDays > 0 ? (daysPassed / totalDays * 100) : 0;
            
            // คำนวณ Efficiency Ratio (Achievement vs Time)
            const efficiencyRatio = timeUsePercentage > 0 ? (progressPercentage / timeUsePercentage) : 0;
            
            // กำหนดสถานะประสิทธิภาพ
            let efficiencyStatus = 'efficient';
            let efficiencyText = 'มีประสิทธิภาพดี';
            
            if (efficiencyRatio < 0.8) {
                efficiencyStatus = 'inefficient';
                efficiencyText = 'ต้องปรับปรุง';
            } else if (efficiencyRatio < 1.0) {
                efficiencyStatus = 'moderate';
                efficiencyText = 'ปานกลาง';
            }

            // คำนวณยอดขั้นต่ำเพื่อให้บรรลุ 80% และ 85%
            const target80 = targetAmount * 0.8;
            const target85 = targetAmount * 0.85;
            const remaining80 = Math.max(0, target80 - currentAmount);
            const remaining85 = Math.max(0, target85 - currentAmount);
            const dailyTarget80 = totalDays > 0 ? (remaining80 / totalDays) : 0;
            const dailyTarget85 = totalDays > 0 ? (remaining85 / totalDays) : 0;

            // ตรวจสอบว่าถึงเป้าหมายย่อยแล้วหรือยัง
            const is80Completed = currentAmount >= target80;
            const is85Completed = currentAmount >= target85;

            // แนะนำการกระจายยอด
            const getRecommendations = () => {
                if (!targetAmount || !totalDays) return [];
                
                const recommendations = [];
                
                if (dailyTarget > 0) {
                    recommendations.push(`ทำยอดวันละ ${dailyTarget.toLocaleString('th-TH', {maximumFractionDigits: 0})} บาท`);
                    
                    const weeklyTarget = dailyTarget * 7;
                    recommendations.push(`ทำยอดสัปดาห์ละ ${weeklyTarget.toLocaleString('th-TH', {maximumFractionDigits: 0})} บาท`);
                    
                    const monthlyTarget = dailyTarget * 30;
                    recommendations.push(`ทำยอดเดือนละ ${monthlyTarget.toLocaleString('th-TH', {maximumFractionDigits: 0})} บาท`);
                }
                
                return recommendations;
            };

            // บันทึกเป็น PNG
            const saveAsPNG = async () => {
                if (!contentRef.current) return;

                try {
                    // Add save mode class to hide buttons
                    contentRef.current.classList.add('save-mode');
                    
                    const canvas = await html2canvas(contentRef.current, {
                        backgroundColor: '#ffffff',
                        scale: 2,
                        useCORS: true,
                        logging: false,
                        onclone: function(clonedDoc) {
                            const clonedElement = clonedDoc.getElementById('save-content');
                            if (clonedElement) {
                                clonedElement.classList.add('save-mode');
                            }
                        }
                    });
                    
                    // Remove save mode class
                    contentRef.current.classList.remove('save-mode');
                    
                    const link = document.createElement('a');
                    link.download = `achievement-report-${new Date().toISOString().slice(0, 10)}.png`;
                    link.href = canvas.toDataURL('image/png', 1.0);
                    link.click();
                } catch (error) {
                    console.error('Error saving image:', error);
                    alert('ไม่สามารถบันทึกภาพได้ กรุณาลองอีกครั้งหรือใช้ Ctrl+P เพื่อพิมพ์แทน');
                }
            };

            return React.createElement('div', { className: "w-full max-w-4xl mx-auto" },
                React.createElement('div', { 
                    ref: contentRef,
                    id: "save-content",
                    className: "achievement-card bg-white rounded-xl shadow-lg print-container"
                },
                    // Header
                    React.createElement('div', { className: "gradient-header text-white p-6 rounded-t-xl" },
                        React.createElement('h1', { className: "text-2xl font-bold flex items-center gap-3" },
                            React.createElement(Target, { className: "w-7 h-7" }),
                            "Achievement Calculator"
                        ),
                        React.createElement('p', { className: "text-blue-100 mt-1" }, "คำนวณและติดตามยอด Achievement ของคุณ")
                    ),

                    // Tabs
                    React.createElement('div', { className: "bg-gray-50 border-b border-gray-200 no-save" },
                        React.createElement('div', { className: "flex" },
                            React.createElement('button', {
                                className: `px-6 py-3 text-sm font-medium border-b-2 transition-colors ${
                                    activeTab === 'dateRange'
                                        ? 'border-blue-600 text-blue-600 bg-white'
                                        : 'border-transparent text-gray-500 hover:text-gray-700'
                                }`,
                                onClick: () => setActiveTab('dateRange')
                            },
                                React.createElement(Calendar, { className: "w-4 h-4 inline mr-2" }),
                                "ช่วงวันที่"
                            ),
                            React.createElement('button', {
                                className: `px-6 py-3 text-sm font-medium border-b-2 transition-colors ${
                                    activeTab === 'days'
                                        ? 'border-blue-600 text-blue-600 bg-white'
                                        : 'border-transparent text-gray-500 hover:text-gray-700'
                                }`,
                                onClick: () => setActiveTab('days')
                            }, "จำนวนวัน")
                        )
                    ),

                    // Content
                    React.createElement('div', { className: "p-6" },
                        // Input Section
                        React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 no-save" },
                            // Date Range Tab
                            activeTab === 'dateRange' && React.createElement(React.Fragment, null,
                                React.createElement('div', null,
                                    React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "วันที่เริ่มต้น"),
                                    React.createElement(ThaiDatePicker, {
                                        value: startDate,
                                        onChange: setStartDate,
                                        placeholder: "เลือกวันที่เริ่มต้น",
                                        isOpen: showStartPicker,
                                        setIsOpen: setShowStartPicker
                                    })
                                ),
                                React.createElement('div', null,
                                    React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "วันที่สิ้นสุด"),
                                    React.createElement(ThaiDatePicker, {
                                        value: endDate,
                                        onChange: setEndDate,
                                        placeholder: "เลือกวันที่สิ้นสุด",
                                        isOpen: showEndPicker,
                                        setIsOpen: setShowEndPicker
                                    })
                                )
                            ),

                            // Days Tab
                            activeTab === 'days' && React.createElement('div', { className: "md:col-span-2" },
                                React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "จำนวนวัน"),
                                React.createElement('input', {
                                    type: "number",
                                    value: days,
                                    onChange: (e) => setDays(e.target.value),
                                    placeholder: "กรอกจำนวนวัน",
                                    className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                })
                            ),

                            // Target and Current Amount
                            React.createElement('div', null,
                                React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "เป้าหมาย (บาท)"),
                                React.createElement('input', {
                                    type: "number",
                                    value: target,
                                    onChange: (e) => setTarget(e.target.value),
                                    placeholder: "กรอกยอดเป้าหมาย",
                                    className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                })
                            ),
                            React.createElement('div', null,
                                React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "ยอดปัจจุบัน (บาท)"),
                                React.createElement('input', {
                                    type: "number",
                                    value: current,
                                    onChange: (e) => setCurrent(e.target.value),
                                    placeholder: "กรอกยอดปัจจุบัน",
                                    className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                })
                            )
                        ),

                        // Results Section
                        totalDays > 0 && targetAmount > 0 && React.createElement('div', { className: "space-y-6" },
                            // Summary Cards
                            React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-5 gap-4" },
                                React.createElement('div', { className: "stat-card bg-blue-50 rounded-lg p-4 text-center border border-blue-100" },
                                    React.createElement('div', { className: "text-2xl font-bold text-blue-600" }, totalDays),
                                    React.createElement('div', { className: "text-sm text-gray-600" }, "วันทั้งหมด")
                                ),
                                React.createElement('div', { className: "stat-card bg-gray-50 rounded-lg p-4 text-center border border-gray-100" },
                                    React.createElement('div', { className: "text-2xl font-bold text-gray-600" }, daysPassed),
                                    React.createElement('div', { className: "text-sm text-gray-600" }, "วันที่ผ่านไป")
                                ),
                                React.createElement('div', { className: "stat-card bg-green-50 rounded-lg p-4 text-center border border-green-100" },
                                    React.createElement('div', { className: "text-2xl font-bold text-green-600" },
                                        targetAmount.toLocaleString('th-TH')
                                    ),
                                    React.createElement('div', { className: "text-sm text-gray-600" }, "เป้าหมาย")
                                ),
                                React.createElement('div', { className: "stat-card bg-yellow-50 rounded-lg p-4 text-center border border-yellow-100" },
                                    React.createElement('div', { className: "text-2xl font-bold text-yellow-600" },
                                        currentAmount.toLocaleString('th-TH')
                                    ),
                                    React.createElement('div', { className: "text-sm text-gray-600" }, "ยอดปัจจุบัน")
                                ),
                                React.createElement('div', { className: "stat-card bg-red-50 rounded-lg p-4 text-center border border-red-100" },
                                    React.createElement('div', { className: "text-2xl font-bold text-red-600" },
                                        remainingAmount.toLocaleString('th-TH')
                                    ),
                                    React.createElement('div', { className: "text-sm text-gray-600" }, "ยอดที่เหลือ")
                                )
                            ),

                            // Time Use Percentage
                            React.createElement('div', { className: "bg-white rounded-lg p-6 border border-gray-200" },
                                React.createElement('h3', { className: "text-lg font-medium text-gray-800 mb-4 flex items-center gap-2" },
                                    React.createElement(Clock, { className: "w-5 h-5 text-blue-600" }),
                                    "การใช้เวลา"
                                ),
                                React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-2 gap-6" },
                                    React.createElement('div', null,
                                        React.createElement('div', { className: "flex justify-between items-center mb-2" },
                                            React.createElement('span', { className: "text-sm font-medium text-gray-700" }, "เวลาใช้ไป"),
                                            React.createElement('span', { className: "text-sm font-medium text-gray-700" },
                                                `${timeUsePercentage.toFixed(1)}%`
                                            )
                                        ),
                                        React.createElement('div', { className: "time-progress-bar" },
                                            React.createElement('div', {
                                                className: "time-progress-fill bg-blue-500",
                                                style: { width: `${timeUsePercentage}%` }
                                            })
                                        ),
                                        React.createElement('div', { className: "text-xs text-gray-500 mt-1" },
                                            `${daysPassed} วัน จาก ${totalDays} วัน`
                                        )
                                    ),
                                    React.createElement('div', null,
                                        React.createElement('div', { className: "flex justify-between items-center mb-2" },
                                            React.createElement('span', { className: "text-sm font-medium text-gray-700" }, "ประสิทธิภาพ"),
                                            React.createElement('span', { 
                                                className: `efficiency-indicator ${efficiencyStatus}` 
                                            }, efficiencyText)
                                        ),
                                        React.createElement('div', { className: "text-sm text-gray-600" },
                                            `อัตราส่วนความสำเร็จ: ${efficiencyRatio.toFixed(2)}`
                                        ),
                                        React.createElement('div', { className: "text-xs text-gray-500 mt-1" },
                                            efficiencyRatio >= 1 ? 
                                                "🎯 ก้าวหน้าเร็วกว่าเป้าหมาย" :
                                            efficiencyRatio >= 0.8 ? 
                                                "📊 ก้าวหน้าตามเป้าหมาย" :
                                                "⚠️ ต้องเร่งความเร็ว"
                                        )
                                    )
                                )
                            ),

                            // Progress Bar - UPDATED: ไม่เพิ่มความยาวเมื่อเกิน 100% แต่เปลี่ยนสี
                            React.createElement('div', { className: "bg-gray-50 rounded-lg p-6 border border-gray-200" },
                                React.createElement('div', { className: "flex justify-between items-center mb-2" },
                                    React.createElement('span', { className: "text-sm font-medium text-gray-700" }, "ความคืบหน้า"),
                                    React.createElement('span', { className: "text-sm font-medium text-gray-700" },
                                        `${progressPercentage.toFixed(1)}%`
                                    )
                                ),
                                React.createElement('div', { className: "w-full bg-gray-200 rounded-full h-3" },
                                    React.createElement('div', {
                                        className: `h-3 rounded-full transition-all duration-300 ${
                                            progressPercentage >= 100 ? 'bg-purple-600' : // เปลี่ยนเป็นสีม่วงเมื่อเกิน 100%
                                            progressPercentage >= 75 ? 'bg-blue-600' :
                                            progressPercentage >= 50 ? 'bg-yellow-600' : 'bg-red-600'
                                        }`,
                                        style: { 
                                            width: `${Math.min(100, progressPercentage)}%` // ไม่เกิน 100%
                                        }
                                    })
                                ),
                                progressPercentage > 100 && React.createElement('div', { 
                                    className: "mt-2 text-sm text-purple-600 font-medium text-center"
                                }, `🎉 ทำได้เกินเป้าหมาย ${(progressPercentage - 100).toFixed(1)}%`)
                            ),

                            // Milestone Progress
                            React.createElement('div', { className: "bg-white rounded-lg p-6 border border-gray-200" },
                                React.createElement('h3', { className: "text-lg font-medium text-gray-800 mb-4 flex items-center gap-2" },
                                    "เป้าหมายย่อย",
                                    React.createElement('svg', { className: "w-5 h-5 text-blue-600", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24" },
                                        React.createElement('path', { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: "2", d: "M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" })
                                    )
                                ),
                                
                                // แถบแสดงความคืบหน้าเป้าหมายย่อย
                                React.createElement('div', { className: "milestone-bar" },
                                    React.createElement('div', { 
                                        className: "milestone-progress",
                                        style: { width: `${Math.min(100, progressPercentage)}%` }
                                    }),
                                    React.createElement('div', { 
                                        className: "milestone-marker milestone-80",
                                        style: { left: '80%' }
                                    }),
                                    React.createElement('div', { 
                                        className: "milestone-marker milestone-85",
                                        style: { left: '85%' }
                                    }),
                                    React.createElement('div', { 
                                        className: "milestone-label",
                                        style: { left: '80%' }
                                    }, "80%"),
                                    React.createElement('div', { 
                                        className: "milestone-label",
                                        style: { left: '85%' }
                                    }, "85%")
                                ),
                                
                                React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-2 gap-4 mt-6" },
                                    React.createElement('div', { className: "bg-blue-50 p-4 rounded-lg border border-blue-100" },
                                        React.createElement('div', { className: "flex items-center justify-between" },
                                            React.createElement('div', { className: "text-sm font-medium text-blue-800" }, "เป้าหมาย 80%"),
                                            React.createElement('span', { 
                                                className: `completion-badge ${is80Completed ? 'completed' : 'not-completed'}` 
                                            }, is80Completed ? 'สำเร็จ' : 'ยังไม่สำเร็จ')
                                        ),
                                        React.createElement('div', { className: "text-xl font-bold text-blue-600 mt-2" },
                                            dailyTarget80 > 0 ? 
                                                `วันละ ${Math.ceil(dailyTarget80).toLocaleString('th-TH')} บาท` : 
                                                "ถึงเป้าหมายแล้ว"
                                        ),
                                        React.createElement('div', { className: "text-xs text-blue-600 mt-1" },
                                            `ยอดรวม ${target80.toLocaleString('th-TH')} บาท`
                                        )
                                    ),
                                    React.createElement('div', { className: "bg-purple-50 p-4 rounded-lg border border-purple-100" },
                                        React.createElement('div', { className: "flex items-center justify-between" },
                                            React.createElement('div', { className: "text-sm font-medium text-purple-800" }, "เป้าหมาย 85%"),
                                            React.createElement('span', { 
                                                className: `completion-badge ${is85Completed ? 'completed' : 'not-completed'}` 
                                            }, is85Completed ? 'สำเร็จ' : 'ยังไม่สำเร็จ')
                                        ),
                                        React.createElement('div', { className: "text-xl font-bold text-purple-600 mt-2" },
                                            dailyTarget85 > 0 ? 
                                                `วันละ ${Math.ceil(dailyTarget85).toLocaleString('th-TH')} บาท` : 
                                                "ถึงเป้าหมายแล้ว"
                                        ),
                                        React.createElement('div', { className: "text-xs text-purple-600 mt-1" },
                                            `ยอดรวม ${target85.toLocaleString('th-TH')} บาท`
                                        )
                                    )
                                )
                            ),

                            // Daily Target (แสดงเฉพาะเมื่อยังไม่ถึงเป้าหมาย)
                            dailyTarget > 0 && React.createElement('div', { className: "bg-blue-50 rounded-lg p-6 text-center border border-blue-200" },
                                React.createElement('h3', { className: "text-lg font-medium text-gray-800 mb-2" }, "ยอดที่ต้องทำต่อวัน"),
                                React.createElement('div', { className: "text-3xl font-bold text-blue-600" },
                                    dailyTarget.toLocaleString('th-TH', {maximumFractionDigits: 0}), " บาท"
                                ),
                                React.createElement('div', { className: "text-sm text-gray-600 mt-2" },
                                    `เพื่อให้ถึงเป้าหมาย ${targetAmount.toLocaleString('th-TH')} บาท ใน ${totalDays} วัน`
                                )
                            ),

                            // Recommendations
                            React.createElement('div', { className: "bg-gray-50 rounded-lg p-6 border border-gray-200" },
                                React.createElement('h3', { className: "text-lg font-medium text-gray-800 mb-4 flex items-center gap-2" },
                                    React.createElement(TrendingUp, { className: "w-5 h-5 text-blue-600" }),
                                    "คำแนะนำการกระจายยอด"
                                ),
                                
                                remainingAmount > 0 ?
                                    React.createElement('div', { className: "space-y-3" },
                                        getRecommendations().map((rec, index) =>
                                            React.createElement('div', { key: index, className: "flex items-center gap-3" },
                                                React.createElement('div', { className: "w-2 h-2 bg-blue-600 rounded-full" }),
                                                React.createElement('span', { className: "text-gray-700" }, rec)
                                            )
                                        ),
                                        
                                        React.createElement('div', {
                                            className: `mt-4 p-3 rounded-lg ${
                                                efficiencyRatio >= 1 ? 'bg-green-100 text-green-700 border border-green-200' :
                                                efficiencyRatio >= 0.8 ? 'bg-yellow-100 text-yellow-700 border border-yellow-200' :
                                                'bg-red-100 text-red-700 border border-red-200'
                                            }`
                                        },
                                            React.createElement('div', { className: "font-medium" },
                                                efficiencyRatio >= 1 ? 
                                                    '✅ คุณก้าวหน้าเร็วกว่าแผนที่วางไว้!' :
                                                efficiencyRatio >= 0.8 ? 
                                                    '📊 คุณก้าวหน้าตามแผนที่วางไว้' :
                                                    '⚠️ ควรเร่งการทำยอดเพื่อให้ทันแผน'
                                            )
                                        )
                                    ) :
                                    React.createElement('div', { className: "text-gray-500 text-center py-4" },
                                        progressPercentage >= 100 ? 
                                            "ยินดีด้วย! คุณทำเป้าหมายสำเร็จแล้ว" : 
                                            "กรอกข้อมูลให้ครบถ้วนเพื่อดูคำแนะนำ"
                                    )
                            )
                        )
                    ),

                    // Save Button
                    React.createElement('div', { className: "bg-gray-50 border-t border-gray-200 p-4 no-save" },
                        React.createElement('button', {
                            onClick: saveAsPNG,
                            className: "w-full md:w-auto px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-medium rounded-md hover:from-blue-700 hover:to-purple-700 transition-all flex items-center justify-center gap-2 shadow-md hover:shadow-lg"
                        },
                            React.createElement(Download, { className: "w-5 h-5" }),
                            "บันทึกเป็น PNG"
                        )
                    )
                )
            );
        };

        ReactDOM.render(React.createElement(AchievementCalculator), document.getElementById('root'));
    </script>
</body>
</html>
